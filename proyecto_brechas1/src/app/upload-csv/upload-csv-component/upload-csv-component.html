<div class="container">
  <h1>Gesti√≥n de Datos</h1>

  <!-- Pesta√±as -->
  <div class="tabs">
    <button class="tab-btn" [class.active]="activeTab === 'upload'" (click)="setActiveTab('upload')">
      Subir CSV
    </button>
    <button class="tab-btn" [class.active]="activeTab === 'api'" (click)="setActiveTab('api')">
      Conectar API
    </button>
  </div>

  <!-- Bot√≥n de navegaci√≥n -->
  <div class="navigation-buttons">
    <button class="btn btn-primary" (click)="goToPriorizacion()">
      Ir a Prioridad
    </button>
  </div>

  <!-- üìÇ Pesta√±a: Subir CSV -->
  <div *ngIf="activeTab === 'upload'" class="tab-content">
    <h2>Subir Archivo CSV</h2>
    <input type="file" (change)="onFileSelected($event)" accept=".csv" />
    <button class="btn btn-success" (click)="onUpload()" [disabled]="!selectedFile || progress > 0">
      Subir CSV
    </button>

    <!-- Barra de progreso -->
    <div *ngIf="progress > 0 && progress < 100" class="progress-bar">
      <div [style.width.%]="progress">{{ progress }}%</div>
    </div>

    <!-- üìä Gr√°fica -->
    <div class="chart-container" style="margin-top: 20px; height: 400px;">
      <div *ngIf="isBrowser">
        <canvas
          baseChart
          [data]="lineChartData"
          [options]="lineChartOptions"
          [type]="'line'">
        </canvas>
      </div>
    </div>
  </div>

  <!-- üåê Pesta√±a: API -->
  <div *ngIf="activeTab === 'api'" class="tab-content">
    <div *ngIf="isConnected; else notConnected">
      <!-- üìä Datos de poblaci√≥n de Colombia -->
      <div style="margin-top: 30px;">
        <h3>üìä Poblaci√≥n de Colombia (2000‚Äì2020)</h3>

        <table *ngIf="colombiaPopulation.length > 0" border="1" cellpadding="5" cellspacing="0" style="width:100%; border-collapse: collapse;">
          <thead>
            <tr>
              <th>A√±o</th>
              <th>C√≥digo Pa√≠s</th>
              <th>Poblaci√≥n</th>
              <th>Unidad</th>
              <th>Sexo</th>
              <th>Edad</th>
              <th>√Årea</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let item of colombiaPopulation">
              <td>{{ item.TIME_PERIOD }}</td>
              <td>{{ item.REF_AREA }}</td>
              <td>{{ item.OBS_VALUE | number }}</td>
              <td>{{ item.UNIT_MEASURE }}</td>
              <td>{{ item.SEX || 'N/A' }}</td>
              <td>{{ item.AGE || 'N/A' }}</td>
              <td>{{ item.URBANISATION || 'N/A' }}</td>
            </tr>
          </tbody>
        </table>

        <div *ngIf="colombiaPopulation.length === 0">
          No se encontraron datos de poblaci√≥n para Colombia.
        </div>

        <!-- Bot√≥n para cargar -->
        <br>
        <button class="btn btn-info" (click)="fetchColombiaPopulation()">
          Cargar datos de poblaci√≥n
        </button>
      </div>
    </div>

    <!-- ‚ùå Bloque de error mejorado -->
    <ng-template #notConnected>
      <!-- Bot√≥n siempre visible para probar -->
      <button class="btn btn-warning" (click)="checkAPIConnection()" [disabled]="isLoading">
        {{ isLoading ? 'Conectando...' : 'Probar Conexi√≥n API' }}
      </button>

      <!-- Mensaje SOLO si ya intent√≥ y no conect√≥ -->
      <p *ngIf="!isLoading && !isConnected" >
        Por favor presione el boton, si continua viendo este mensaje,<br> la api no esta conectando

      </p>
    </ng-template>
  </div>
<<<<<<< HEAD

  <div>
    <!-- üåç Mapa -->
    <app-mapa></app-mapa>
  </div>
</div>
=======
  <div>
    <!-- üåç Mapa -->
<app-mapa></app-mapa>
  </div>


>>>>>>> 8df85ae (cambio de theme, claro y oscuro)
